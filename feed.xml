<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.8.5">Jekyll</generator><link href="blog.flavioschuindt.com/feed.xml" rel="self" type="application/atom+xml" /><link href="blog.flavioschuindt.com/" rel="alternate" type="text/html" /><updated>2019-09-29T00:17:18-07:00</updated><id>blog.flavioschuindt.com/feed.xml</id><title type="html">Flávio Schuindt</title><subtitle>All content copyright Flávio Schuindt © 2019. All rights reserved.</subtitle><entry><title type="html">DICOM: From Zero to Hero - Part 1</title><link href="blog.flavioschuindt.com/healthcare/dicom/2019/09/21/dicom-from-zero-to-hero-part-1.html" rel="alternate" type="text/html" title="DICOM: From Zero to Hero - Part 1" /><published>2019-09-21T19:41:07-07:00</published><updated>2019-09-21T19:41:07-07:00</updated><id>blog.flavioschuindt.com/healthcare/dicom/2019/09/21/dicom-from-zero-to-hero-part-1</id><content type="html" xml:base="blog.flavioschuindt.com/healthcare/dicom/2019/09/21/dicom-from-zero-to-hero-part-1.html">&lt;p style=&quot;text-align: justify&quot;&gt;This is the first post in a series of three presenting the DICOM standard. We’ll cover the basic understandind of DICOM, starting with the DICOM data encoding, the DICOM Image representation and DICOM Communication Model. Let’s start!&lt;/p&gt;

&lt;h2 id=&quot;introduction&quot;&gt;Introduction&lt;/h2&gt;

&lt;p style=&quot;text-align: justify&quot;&gt;&lt;a href=&quot;https://www.dicomstandard.org/&quot;&gt;DICOM&lt;/a&gt; stands for &lt;span style=&quot;color:red;font-weight:bold&quot;&gt;D&lt;/span&gt;igital &lt;span style=&quot;color:red;font-weight:bold&quot;&gt;I&lt;/span&gt;maging and &lt;span style=&quot;color:red;font-weight:bold&quot;&gt;Co&lt;/span&gt;mmunications in &lt;span style=&quot;color:red;font-weight:bold&quot;&gt;M&lt;/span&gt;edicine and is the &lt;strong&gt;international standard&lt;/strong&gt; to transmit, store, retrieve, print, process, and display &lt;strong&gt;medical imaging&lt;/strong&gt; information. It’s the standard behing radiology equipment, networking servers and the &lt;strong&gt;P&lt;/strong&gt;icture &lt;strong&gt;A&lt;/strong&gt;rchiving and &lt;strong&gt;C&lt;/strong&gt;ommunication &lt;strong&gt;S&lt;/strong&gt;ystem (PACS).&lt;/p&gt;

&lt;p style=&quot;text-align: justify&quot;&gt;You can think about it in this way: You have different entities (image-acquisition devices, PACS, workstations, etc.) playing different roles in the Healthcare world and DICOM is the standard that allows these entities to exchange information, i.e., interoperability.&lt;/p&gt;

&lt;h2 id=&quot;the-history&quot;&gt;The History&lt;/h2&gt;

&lt;p style=&quot;text-align: justify&quot;&gt;In the beginning of the 80’s, it was almost impossible for anyone other than manufacturers of CT and MRI devices to read and decode the images produced by the device. In &lt;strong&gt;1983&lt;/strong&gt; the &lt;a href=&quot;https://www.acr.org/&quot;&gt;American College of Radiology&lt;/a&gt; and the &lt;a href=&quot;https://www.nema.org/pages/default.aspx&quot;&gt;National Electrical Manufacturers Association&lt;/a&gt; worked together and estabilished a standards committee to meets the combined needs of radiologists, physicists and equipment vendors. Then, in &lt;strong&gt;1985&lt;/strong&gt; the first version of DICOM was released with name &lt;strong&gt;ACR-NEMA 300&lt;/strong&gt;. The second version of the ACR-NEMA 300 came out in &lt;strong&gt;1988&lt;/strong&gt; and gained increased acceptance among vendors. Only in &lt;strong&gt;1993&lt;/strong&gt; the third version came out and was finally named as &lt;strong&gt;DICOM&lt;/strong&gt;. The name changed because the Cardiologists entered in the game too and a name which contains only radiologists (ACR) would not make the cardiologists happy. There was a war a that time. The DICOM 3.0 from &lt;strong&gt;1993&lt;/strong&gt; had &lt;strong&gt;9&lt;/strong&gt; parts of the standard and the current version, &lt;strong&gt;which is still 3.0&lt;/strong&gt;, incorporated &lt;strong&gt;10&lt;/strong&gt; new parts and &lt;strong&gt;210&lt;/strong&gt; supplements.&lt;/p&gt;

&lt;h2 id=&quot;dicom-data-types-vrs&quot;&gt;DICOM Data Types: VRs&lt;/h2&gt;

&lt;p style=&quot;text-align: justify&quot;&gt;As you’ll see in the coming sections, each DICOM element is represented by a DICOM tag. With the definition of this tag, comes the &lt;strong&gt;V&lt;/strong&gt;alue &lt;strong&gt;R&lt;/strong&gt;epresentation (&lt;strong&gt;VR&lt;/strong&gt;) of this tag, i.e., the kind of values that one can assign to this tag. Think about it as the same variable declaration that you do in a programming language: you say the &lt;code class=&quot;highlighter-rouge&quot;&gt;name&lt;/code&gt; and the &lt;code class=&quot;highlighter-rouge&quot;&gt;type&lt;/code&gt; of the variable. DICOM defines 27 basic data types and any data that you intend to encode in DICOM &lt;strong&gt;must&lt;/strong&gt; use one of these 27 data types. You can see all of them &lt;a href=&quot;http://dicom.nema.org/medical/dicom/current/output/chtml/part05/PS3.5.html&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;For example, following our analogy with programming languages, let’s say you would like to represent the number of rows of a medical image in C:&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;unsigned short rows = 800;&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;And the same data in DICOM:&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Tag (0028,0010) = 800;&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;(0028,0010)&lt;/code&gt; is the DICOM tag for the image rows.&lt;/p&gt;

&lt;p style=&quot;text-align: justify&quot;&gt;I’m not going to enter in the details here of each and every VR. For this you can always refer to the PS3.5 of the DICOM standard mentioned above. However, there are general rules that apply for all VRs that you should be aware of:&lt;/p&gt;

&lt;ul style=&quot;text-align: justify&quot;&gt;
  &lt;li&gt;The data can be in text or binary format. Each VR will define if its store text or binary;&lt;/li&gt;
  &lt;li&gt;Every VR has a data length. This is exactlyy the way DICOM knows where each data element starts and ends;&lt;/li&gt;
  &lt;li&gt;A VR can have a fixed data length or not for the number of characters/bytes. For example: &lt;strong&gt;DA&lt;/strong&gt;, Date, has a fixed length of 8, a string in the format &lt;strong&gt;YYYYMMDD&lt;/strong&gt;. On the other hand, &lt;strong&gt;DS&lt;/strong&gt;, Decimal string, for example, has a length of 16 maximum;&lt;/li&gt;
  &lt;li&gt;In the process of encondig, no matter if fixed length or not, all DICOM elements &lt;strong&gt;must contain even length&lt;/strong&gt;, i.e., if text, DICOM will guarantee an even number of characters and, if binary, DICOM will guarantee an even number of bytes. It adds a blank space if text data or a &lt;strong&gt;NULL&lt;/strong&gt; byte if the number of characters or bytes are odd, respectively.&lt;/li&gt;
&lt;/ul&gt;

&lt;p style=&quot;text-align: justify&quot;&gt;Ok, now you know that VR is the basic foundation that define all the available data type available in DICOM. What is missing now? If you pay attention, the VR is only defining the data type, but we need a way to define &lt;strong&gt;data elements&lt;/strong&gt; and it should be consistent among different DICOM vendors. Then comes the &lt;strong&gt;DICOM Dictionary&lt;/strong&gt;.&lt;/p&gt;

&lt;h2 id=&quot;dicom-data-dictionary&quot;&gt;DICOM Data Dictionary&lt;/h2&gt;

&lt;p style=&quot;text-align: justify&quot;&gt;The &lt;a href=&quot;http://dicom.nema.org/medical/dicom/current/output/html/part06.html&quot;&gt;DICOM Data Dictionary&lt;/a&gt; is in its essence a big table that specifies all data elements alongside with their properties. See for example a DICOM dictionary example available in the awesome book &lt;a href=&quot;https://www.amazon.com/Digital-Imaging-Communications-Medicine-DICOM/dp/3642108490&quot;&gt;Digital Imaging and Communications in Medicine (DICOM): A Practical Introduction and Survival Guide&lt;/a&gt;:
&lt;img src=&quot;/assets/images/dicom_dict.png&quot; alt=&quot;alt text&quot; title=&quot;DICOM Dictionary&quot; /&gt;
From this table, you probably already noted that each element belongs to a group and has a tag. Therefore, a pair &lt;code class=&quot;highlighter-rouge&quot;&gt;(group, tag)&lt;/code&gt; uniquely identifies an element in DICOM. Other properties are the &lt;strong&gt;name&lt;/strong&gt;, &lt;strong&gt;keyword&lt;/strong&gt;, &lt;strong&gt;VR&lt;/strong&gt;, &lt;strong&gt;VM&lt;/strong&gt; and &lt;strong&gt;RET&lt;/strong&gt;. While DICOM applications refer to each data element by its group and tag, &lt;strong&gt;name&lt;/strong&gt; is a more human-readable description of the data element. The &lt;strong&gt;keyword&lt;/strong&gt; is a one-word text that provide a full description of the data element. Think about it as a represenation more close to property names in standards like XML or HTTP. &lt;strong&gt;VR&lt;/strong&gt; is the Value Represenation discussed in the previous section. &lt;strong&gt;VM&lt;/strong&gt; is the quantity of values that you can store in this data element. For example, if you have a &lt;strong&gt;VM&lt;/strong&gt; of 1 you can only store one data of that specificy &lt;strong&gt;VR&lt;/strong&gt;. On the other hand, a &lt;strong&gt;VM&lt;/strong&gt; of &lt;strong&gt;1-n&lt;/strong&gt; would allow one or more values of the specific &lt;strong&gt;VR&lt;/strong&gt;. One important thing to note here is to understand how DICOM store multiple values into a single element? For binary data, DICOM uses the legth of the single-value VR and just apply an offset to read the next element:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/multi_values_dicom.png&quot; alt=&quot;alt text&quot; title=&quot;Multi-value DICOM binary data&quot; /&gt;&lt;/p&gt;

&lt;p style=&quot;text-align: justify&quot;&gt;For text data, there are no fixed legth. In this case, DICOM uses backslash (&lt;strong&gt;\&lt;/strong&gt;) as a delimiter. The data element (0010,1000), for example, &lt;strong&gt;Other Patient IDs&lt;/strong&gt;, has VR &lt;strong&gt;LO&lt;/strong&gt; (Long Sting) and multiplicity 1-n. In this case you could represent a patient who has, let’s say, three patient IDs (123, 456 and 789) in this way: &lt;strong&gt;“123\456\789”&lt;/strong&gt;.&lt;/p&gt;
&lt;p style=&quot;text-align: justify&quot;&gt;Last, but not least, the &lt;strong&gt;RET&lt;/strong&gt; in the dicom dictonary defines a data element as RETIRED. As an analogy, they are like the &lt;strong&gt;deprecated&lt;/strong&gt; objects and/or methods in a programming language.&lt;/p&gt;

&lt;p style=&quot;text-align: justify&quot;&gt;Another type of DICOM Dictonary is the &lt;strong&gt;Private DICOM Dictionary&lt;/strong&gt;. As you can see in the previous section, the public DICOM Dictionary is composed of more than 2000 data elements. While this looks impressive, allowing you to encode almost every information you need, sometimes you need to define custom attributes that only you, as a manufacturer, know. DICOM is prepared for it and reserves all odd groups for private data elements. For the sake of example, you could define &lt;strong&gt;(0009, 1010)&lt;/strong&gt; as Patient’s Education Level. Then,if you need that a specific consumer understand this data, you need to distribute this private dictionary so the consumer can understand each tag that you define.&lt;/p&gt;

&lt;h2 id=&quot;dicom-image-structure&quot;&gt;DICOM Image Structure&lt;/h2&gt;

&lt;p style=&quot;text-align: justify&quot;&gt;To understand DICOM, the first thing that you need to know is how the standard defines a &lt;strong&gt;DICOM Image&lt;/strong&gt;. Every image in DICOM is an &lt;em&gt;Information Object Definition&lt;/em&gt; (IOD). To understand what is the &lt;strong&gt;IOD&lt;/strong&gt;, pretend you are a doctor and you are examining a patient MR image to look for any disease and/or disorder. &lt;strong&gt;You simply can’t provide a diagnose only looking at the image&lt;/strong&gt;. You need to look also at the &lt;strong&gt;metadata&lt;/strong&gt;, i.e., the data produced at the circustances in which that particular image was taken. The metadata can be: Patient Name, Patient ID, Study Date, Study Description, Image Date, Image Time, etc. Then:&lt;br /&gt;&lt;br /&gt;
&lt;span style=&quot;color:red;font-weight:bold&quot;&gt;Pixel Data&lt;/span&gt; + &lt;span style=&quot;color:blue;font-weight:bold&quot;&gt;Metadata&lt;/span&gt; = &lt;strong&gt;IOD&lt;/strong&gt; &lt;br /&gt;&lt;br /&gt;
&lt;img src=&quot;/assets/images/dicom_data.png&quot; alt=&quot;alt text&quot; title=&quot;DICOM IOD&quot; /&gt;&lt;/p&gt;</content><author><name></name></author><category term="DICOM" /><category term="Healthcare" /><summary type="html">This is the first post in a series of three presenting the DICOM standard. We’ll cover the basic understandind of DICOM, starting with the DICOM data encoding, the DICOM Image representation and DICOM Communication Model. Let’s start!</summary></entry></feed>